
2018.11.18

1. Cap45 阵列振子特性测试：
测试每个振子相位，振幅。
振幅：
输入为9Vpp，稳压电源直接连接Arduino Mega驱动板
振幅采用CH2连接的R振子进行测试，白色美纹纸标记为test。

相位：
以0号中心振子为标准，双通道测试，调节两个波形曲线使其纵向位于中心对称处。
比较其在零位横线处的延迟作为相位。

数据见 array_voltage_data.xlsx

问题:

阵列振幅问题，超声振子振幅差异明显偏差，偏差很大。

2019.11.19
放大板Bug测试：
测试标准5Vpp，1Khz稳定方波（Arduino方波输出口）输入，放大版输出稳定信号，基本无问题。

2. 稳定性相关测试
测试12Vpp，40Khz稳定方波输入，Nano生成信号接功放板，非中轴线位置具有不稳定势阱，无法长时间悬浮。

问题：
使用L298N步进电机功率放大版后12Vpp输入电压下电流从0.11A变为0.54A。
参考作者功率 9Vpp，0.33A
功率变大后声场力度提升明显，具有触觉反馈。


3. Arduino信号测试
信号稳定性问题 Arduino Mega 产生的信号十分不稳定，方波左右移动，且调试示波器Trigger不能得到稳定信号。

实际Arduino Mega的生成信号并非40Khz（25us）


- 实际为37Khz左右，4个周期为110us(每个29.5us)
- 周期性波包，每6个周期有一个长间隔，如图，波包周期约为180us。等效频率6/(180)=34.2khz

问题：
Mega产生信号不稳定。

4. Flat64振子特性测试
振幅：
test标记R振子，9Vpp输入，Arduino Mega与稳压电源直连

相位：
以1号右下角振子为标准，以标记Phase Standard的R振子为基准。待测振子为标记test的R振子。进行双通道测试，调节两个波形曲线使其纵向位于中心对称处。
比较其在零位横线处的延迟作为相位。

5. 振子测试时发现的BUG-压电晶体各向异性        
### 数据不可靠!!!接收振子 在同一个振子上面转一圈 测量的结果随角度变化。
压电晶体各向异性    

11.22

再次测试 

## 时间轴拉长之后声波信号并不稳定 整体存在正弦周期性波动

针对19日3信号稳定性和信号发生问题：

可能来源
1. Arduino硬件层代码问题
2.  直流电源不稳定周期性波动-电源负反馈稳定调节
3. Arduino硬件做工问题

针对2来源的测试

仅采用笔记本电脑5v稳压电源驱动Arduino 测试Arduino输出声波信号稳定性

2018.11.24
部分振子间歇性停止发声
1.排线没接触好
2.焊接处不稳定，掉线

解决方案
1. 三路连接器固定+红白线

2018.11.26
1. 测量振子相对相位差（信号时间延迟），示波器Measure，CH1-CH2。Cap45以中心振子为零相位点。Flat64以0号振子为参照点。
2. 测量所有振子相对误差。

2018.11.27

1. 拆解超声振子。结构简单，电极，压电片与扬声器用银胶粘合，压电片为单晶各向异性。
2. 侧量各向异性对于振子相位延迟的影响，各向异性对于振子相位延迟无影响。
3. 组装3路连接器和红白线，提高稳定性。

## 
发现BUG，驱动板需要接地，否则具有寄生电容。
驱动板+Mega+电路测量需要共用一个地线****

共用地线可以大大降低振子相位延迟****。
###这说明之前测量的FLAT64振子相位延迟数据报废。

4. 修正BUG之后进行振子相位特性检验。
取pin0为测试引脚，pin11作为标准引脚，其余振子关闭。测量振子标记为TEST，电源Vpp=9.8V

振子振幅特性检验-Sound Level Meter声强测试仪，关闭空调，屏蔽外界噪声。

振子声强分布87dB到89dB之间，振子按顺序测量后插在塑料板上。

振子分类
BULLSHIT-坏掉的振子
GOODBOY-相位差1us之内
GOODGIRL-相位差1us之内，与BOY极性相反
CANDIDATE-相位差0.8-1.2us左右

振子筛选：
1. 相位延迟0-1us以内
2. 振幅偏差去掉黄色标记振子。


2018.11.28
#### 重大BUG，何剑锋采购原件时错误购买了1uf贴片电容，而实际项目要求为0.1uf的贴片电容。


接线安装步骤
0. 标记振子，0，1，2，3，4
1. 标记连接线，8根一组，中性笔在红色面标记，标记面为信号线。每组中从左到右按顺序依次连接，并标记。
2. 信号线一侧（双箭头面左侧）接T+，安装连接器。
2. 测试连通性和相位，绿色线接T+，T+朝向球心，其波形应该与测试振子同步。
3. 502从外部球面外部粘合，固定后再次测试连接性。

连结性-相位同步-一一对应


2018.11.29
1. 焊接全新驱动板
2. 杜邦线转接连线

新的TC4427需要Vcc才能放大

连通性测试：
排.列 近电源为1排 从左到右为列
1.7
3.1
4.4
6.4